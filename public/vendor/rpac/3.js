(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{162:function(e,t,n){"use strict";function o(e,t,n,o,r,i,a,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return o}))},176:function(e,t,n){"use strict";n.r(t);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a={name:"index-roles",data:function(){return{loading:!0,path:"roles",table:[],columns:[{name:"id",label:"id",width:220,type:"input"},{name:"name",label:"name",type:"input"},{name:"created_at",type:"hidden"}],page:0,disabled:!1,role:null,fields:{},form:{},rules:{id:[{required:!0,message:this.__("id_required"),trigger:"blur"}],name:[{required:!0,message:this.__("name_required"),trigger:"blur"}]},stash:{},q:this.$route.query.q||""}},methods:{onDelete:function(e){var t=this;this.loading=!0,this.$http.delete(this.path+"/"+e).then((function(e){return e.data})).then((function(e){e.id&&(t.$message.success(t.__("deleted")),t.loading=!1,location.reload())})).catch((function(e){console.error(e,e.response),e.response&&t.$notify(t.$catch(e))}))},onSubmit:function(e){var t=this;this.loading=!0;var n=this.path,o=Object.assign(r({},this.form),{_method:"post"});o.created_at&&(n+="/"+o.id,o._method="put",delete o.created_at),this.$http.post(n,o).then((function(e){return e.data})).then((function(e){e.id&&(t.$message.success(t.__("saved")),t.loading=!1,location.reload())})).catch((function(e){console.error(e,e.response),e.response&&t.$notify(t.$catch(e))}))},closeForm:function(){this.role=null,this.setForm(this.stash)},openForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&void 0!==e.name&&(this.role=e,this.setForm(e))},load:function(){var e=this;this.loading=!0;var t=Object.assign(r({},this.$route.query),{page:++this.page});this.$http.get(this.path,{params:t}).then((function(e){return e.data})).then((function(t){e.checkMeta(t),e.setData(t.data),e.scrollTop()})).catch((function(t){console.error(t,t.response),t.response&&e.$notify(e.$catch(t))}))},checkMeta:function(e){e&&e.current_page===e.last_page&&(this.disabled=!0)},setData:function(e){this.table=this.table.concat(e),this.loading=!1},scrollTop:function(){var e=this.$$(".table-wrapper");e&&(e.scrollTop-=1)},rowClick:function(e){this.role=e,this.setForm(e)},setForm:function(e){this.form=Object.assign({},this.form,r({},e))},initForm:function(){var e=this;this.fields=this.columns.filter((function(e){return e.type})),this.fields.forEach((function(t){e.form[t.name]="hidden"===t.type?null:"select"===t.type?[]:""})),this.stash=r({},this.form)}},mounted:function(){this.initForm()}},s=n(162),l=Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$options.name},[n("div",{staticClass:"table-actions"},[n("div",{staticClass:"table-actions__create"},[n("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){return e.openForm(e.form)}}},[e._v(e._s(e.__("add_role")))])],1)]),e._v(" "),n("div",{staticClass:"table-wrapper"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.load,expression:"load"}],attrs:{data:e.table,"infinite-scroll-disabled":"disabled"},on:{"row-click":e.rowClick}},e._l(e.columns,(function(t){return n("el-table-column",{key:t.name,attrs:{prop:t.name,fixed:t.fixed||!1,align:t.align||"left",label:e.__(t.label),width:t.width||"auto","min-width":t.min_width||""},scopedSlots:e._u([{key:"default",fn:function(o){return["roles"===t.name?n("span",e._l(o.row[t.name],(function(t){return n("el-tag",{key:t.id},[e._v(e._s(t.name))])})),1):n("span",[e._v(e._s(o.row[t.name]))])]}}],null,!0)})})),1)],1),e._v(" "),n("el-dialog",{attrs:{visible:!!e.role,fullscreen:!0,center:"",title:e.role&&e.role.id?e.role.name:e.__("add_role"),"before-close":e.closeForm}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[e._l(e.fields,(function(t){return["input"===t.type?[n("el-form-item",{key:t.name,attrs:{label:e.__(t.label),prop:t.name}},[n("el-input",{attrs:{placeholder:e.__(t.placeholder||t.label)},model:{value:e.form[t.name],callback:function(n){e.$set(e.form,t.name,n)},expression:"form[field.name]"}})],1)]:[n("input",{key:t.name,attrs:{type:"hidden",name:t.name},domProps:{value:e.form[t.name]}})]]})),e._v(" "),n("el-form-item",[n("div",{staticStyle:{display:"flex"}},[n("div",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.__("save")))]),e._v(" "),n("el-button",{on:{click:e.closeForm}},[e._v(e._s(e.__("cancel")))])],1),e._v(" "),e.role&&e.role.id?n("div",{staticStyle:{"margin-left":"auto"}},[n("el-popconfirm",e._g({attrs:{confirmButtonType:"danger",confirmButtonText:e.__("ok"),cancelButtonText:e.__("cancel"),title:e.__("confirm_delete"),icon:"el-icon-info",iconColor:"red"}},{onConfirm:function(t){e.onDelete(e.role.id)},onCancel:function(e){return!1}}),[n("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini",plain:""},slot:"reference"},[e._v("\n                                "+e._s(e.__("delete"))+"\n                            ")])],1)],1):e._e()])])],2)],1)],1)}),[],!1,null,null,null);t.default=l.exports}}]);