(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{162:function(e,t,o){"use strict";function r(e,t,o,r,s,n,i,a){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=o,c._compiled=!0),r&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=l):s&&(l=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var f=c.render;c.render=function(e,t){return l.call(t),f(e,t)}}else{var m=c.beforeCreate;c.beforeCreate=m?[].concat(m,l):[l]}return{exports:e,options:c}}o.d(t,"a",(function(){return r}))},174:function(e,t,o){"use strict";o.r(t);function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var i={name:"index-my",data:function(){var e=this;return{loading:!0,path:"users/"+this.$user.id,fields:[{name:"id",label:"id",width:64,type:"hidden"},{name:"name",label:"username",type:"input"},{name:"email",label:"email",type:"input"},{name:"roles",label:"roles",type:"select"},{name:"password",label:"password",type:"password"}],user:null,form:{},rules:{name:[{required:!0,message:this.__("username_required"),trigger:"blur"}],email:[{required:!0,message:this.__("email_required"),trigger:"blur"}],password:[{validator:function(t,o,r){""!==e.form.confirmPassword&&e.$refs.form.validateField("confirmPassword"),r()},trigger:"blur"}],confirmPassword:[{validator:function(t,o,r){""!==e.form.password&&""===o?r(new Error(e.__("confirm_empty"))):o!==e.form.password?r(new Error(e.__("password_mismatch"))):r()},trigger:"blur"}]},stash:{},options:{},showPass:!1,showConfirm:!1}},methods:{onSubmit:function(e){var t=this;this.loading=!0,this.$refs.form.validate((function(e){if(!e)return console.error("error submit!!"),t.loading=!1,!1;var o=t.path,r=Object.assign(s({},t.form),{_method:"put"});t.$http.post(o,r).then((function(e){return e.data})).then((function(e){e.id&&(t.$message.success(t.__("saved")),t.loading=!1)})).catch((function(e){console.error(e,e.response),e.response&&t.$notify(t.$catch(e))}))}))},getUser:function(){var e=this;this.loading=!0,this.$http.get(this.path).then((function(e){return e.data})).then((function(t){e.user=t,e.setForm(t),e.loading=!1})).catch((function(t){console.error(t,t.response),t.response&&e.$notify(e.$catch(t))}))},getRoles:function(){var e=this;this.$http.get("roles").then((function(e){return e.data})).then((function(t){e.setOptions("roles",t.data)})).catch((function(t){console.error(t,t.response),t.response&&e.$notify(e.$catch(t))}))},setOptions:function(e,t){this.options[e]=t},setForm:function(e){this.form=Object.assign({},this.form,s({},e))},initForm:function(){var e={};this.fields.forEach((function(t){e[t.name]="hidden"===t.type?null:"select"===t.type?[]:"","password"===t.type&&(e.confirmPassword="")})),this.setForm(e),this.stash=s({},this.form)}},mounted:function(){this.getRoles(),this.initForm(),this.getUser()}},a=o(162),l=Object(a.a)(i,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.$options.name},[o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.user&&e.user.id?o("h4",[e._v(e._s(e.user.name))]):e._e(),e._v(" "),e.form.id?o("el-form",{ref:"form",attrs:{"status-icon":"",model:e.form,rules:e.rules,"label-position":"top"}},[e._l(e.fields,(function(t){return["input"===t.type?[o("el-form-item",{key:t.name,attrs:{label:e.__(t.label),prop:t.name}},[o("el-input",{attrs:{placeholder:e.__(t.placeholder||t.label)},model:{value:e.form[t.name],callback:function(o){e.$set(e.form,t.name,o)},expression:"form[field.name]"}})],1)]:"select"===t.type?[o("el-form-item",{directives:[{name:"loading",rawName:"v-loading",value:!e.options[t.name],expression:"!options[field.name]"}],key:t.name,attrs:{label:e.__(t.label)}},[o("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"","collapse-tags":"","value-key":"id",placeholder:e.__(t.placeholder||t.label)},model:{value:e.form[t.name],callback:function(o){e.$set(e.form,t.name,o)},expression:"form[field.name]"}},e._l(e.options[t.name],(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e}})})),1)],1)]:"password"===t.type?[o("el-form-item",{key:t.name,attrs:{label:e.__(t.label),prop:"password"}},[o("el-input",{attrs:{type:e.showPass?"text":"password",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[o("i",{directives:[{name:"show",rawName:"v-show",value:!!e.form.password,expression:"!!form.password"}],staticClass:"el-input__icon",class:{"el-icon-lock":e.showPass,"el-icon-view":!e.showPass},attrs:{slot:"suffix"},on:{click:function(t){e.showPass=!e.showPass}},slot:"suffix"})])],1),e._v(" "),o("el-form-item",{key:"confirm_"+t.name,attrs:{label:e.__("confirm_"+t.label),prop:"confirmPassword"}},[o("el-input",{attrs:{type:e.showConfirm?"text":"password",autocomplete:"off"},model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword",t)},expression:"form.confirmPassword"}},[o("i",{directives:[{name:"show",rawName:"v-show",value:!!e.form.confirmPassword,expression:"!!form.confirmPassword"}],staticClass:"el-input__icon",class:{"el-icon-lock":e.showConfirm,"el-icon-view":!e.showConfirm},attrs:{slot:"suffix"},on:{click:function(t){e.showConfirm=!e.showConfirm}},slot:"suffix"})])],1)]:[o("input",{key:t.name,attrs:{type:"hidden",name:t.name},domProps:{value:e.form[t.name]}})]]})),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.__("save")))])],1)],2):e._e()],1)])}),[],!1,null,null,null);t.default=l.exports}}]);